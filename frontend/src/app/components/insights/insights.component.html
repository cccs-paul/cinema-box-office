<!--
  myRC - Insights Component Template
  Copyright (c) 2026 myRC Team
  Licensed under MIT License
-->
<div class="insights-container">
  <!-- Error Message -->
  <div class="alert alert-error" *ngIf="errorMessage">
    <span>âŒ</span> {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>{{ 'insights.loading' | translate }}</p>
  </div>

  <!-- Charts Grid -->
  <div class="charts-grid" *ngIf="!isLoading">
    <!-- Funding by Category -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #fundingByCategoryChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="fundingItems.length === 0">
        <span class="empty-icon">ğŸ“‹</span>
        <p>{{ 'insights.noFundingData' | translate }}</p>
      </div>
    </div>

    <!-- Spending by Category -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #spendingByCategoryChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="spendingItems.length === 0">
        <span class="empty-icon">ğŸ’°</span>
        <p>{{ 'insights.noSpendingData' | translate }}</p>
      </div>
    </div>

    <!-- Funding vs Spending Comparison -->
    <div class="chart-card wide">
      <div class="chart-container tall">
        <canvas #fundingVsSpendingChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="fundingItems.length === 0 && spendingItems.length === 0">
        <span class="empty-icon">ğŸ“ˆ</span>
        <p>{{ 'insights.noComparisonData' | translate }}</p>
      </div>
    </div>

    <!-- CAP vs OM Breakdown -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #capVsOmChart></canvas>
      </div>
    </div>

    <!-- Procurement Status -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #procurementStatusChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="procurementItems.length === 0">
        <span class="empty-icon">ğŸ“¦</span>
        <p>{{ 'insights.noProcurementData' | translate }}</p>
      </div>
    </div>

    <!-- Procurement Type -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #procurementTypeChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="procurementItems.length === 0">
        <span class="empty-icon">ğŸ¢</span>
        <p>{{ 'insights.noProcurementData' | translate }}</p>
      </div>
    </div>

    <!-- Spending Status -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #spendingStatusChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="spendingItems.length === 0">
        <span class="empty-icon">ğŸ’³</span>
        <p>{{ 'insights.noSpendingData' | translate }}</p>
      </div>
    </div>

    <!-- Invoice Coverage by Category -->
    <div class="chart-card wide">
      <div class="chart-container tall">
        <canvas #invoiceCoverageChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="spendingItems.length === 0">
        <span class="empty-icon">ğŸ§¾</span>
        <p>{{ 'insights.noInvoiceData' | translate }}</p>
      </div>
    </div>

    <!-- Currency Distribution -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas #currencyDistributionChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="fundingItems.length === 0 && spendingItems.length === 0">
        <span class="empty-icon">ğŸ’±</span>
        <p>{{ 'insights.noCurrencyData' | translate }}</p>
      </div>
    </div>

    <!-- Training Status -->
    <div class="chart-card" *ngIf="selectedRC?.trainingIncludeInSummary !== false">
      <div class="chart-container">
        <canvas #trainingStatusChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="trainingItems.length === 0">
        <span class="empty-icon">ğŸ“</span>
        <p>{{ 'insights.noTrainingData' | translate }}</p>
      </div>
    </div>

    <!-- Training Type -->
    <div class="chart-card" *ngIf="selectedRC?.trainingIncludeInSummary !== false">
      <div class="chart-container">
        <canvas #trainingTypeChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="trainingItems.length === 0">
        <span class="empty-icon">ğŸ“</span>
        <p>{{ 'insights.noTrainingData' | translate }}</p>
      </div>
    </div>

    <!-- Travel Status -->
    <div class="chart-card" *ngIf="selectedRC?.travelIncludeInSummary !== false">
      <div class="chart-container">
        <canvas #travelStatusChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="travelItems.length === 0">
        <span class="empty-icon">âœˆï¸</span>
        <p>{{ 'insights.noTravelData' | translate }}</p>
      </div>
    </div>

    <!-- Travel Type -->
    <div class="chart-card" *ngIf="selectedRC?.travelIncludeInSummary !== false">
      <div class="chart-container">
        <canvas #travelTypeChart></canvas>
      </div>
      <div class="chart-empty" *ngIf="travelItems.length === 0">
        <span class="empty-icon">âœˆï¸</span>
        <p>{{ 'insights.noTravelData' | translate }}</p>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="quick-stats" *ngIf="!isLoading">
    <div class="stat-card">
      <div class="stat-icon">ğŸ“‹</div>
      <div class="stat-content">
        <span class="stat-value">{{ fundingItems.length }}</span>
        <span class="stat-label">{{ 'insights.fundingItems' | translate }}</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <span class="stat-value">{{ spendingItems.length }}</span>
        <span class="stat-label">{{ 'insights.spendingItems' | translate }}</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“¦</div>
      <div class="stat-content">
        <span class="stat-value">{{ procurementItems.length }}</span>
        <span class="stat-label">{{ 'insights.procurementItems' | translate }}</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ§¾</div>
      <div class="stat-content">
        <span class="stat-value">{{ getTotalInvoiceCount() }}</span>
        <span class="stat-label">{{ 'insights.totalInvoices' | translate }}</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’µ</div>
      <div class="stat-content">
        <span class="stat-value">{{ formatCurrency(getTotalInvoicedAmount()) }}</span>
        <span class="stat-label">{{ 'insights.totalInvoicedAmount' | translate }}</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <span class="stat-value">{{ getInvoiceCoveragePercent() | number:'1.0-1' }}%</span>
        <span class="stat-label">{{ 'insights.invoiceCoveragePercent' | translate }}</span>
      </div>
    </div>
    <div class="stat-card" *ngIf="selectedRC?.trainingIncludeInSummary !== false">
      <div class="stat-icon">ğŸ“</div>
      <div class="stat-content">
        <span class="stat-value">{{ trainingItems.length }}</span>
        <span class="stat-label">{{ 'insights.trainingItems' | translate }}</span>
      </div>
    </div>
    <div class="stat-card" *ngIf="selectedRC?.travelIncludeInSummary !== false">
      <div class="stat-icon">âœˆï¸</div>
      <div class="stat-content">
        <span class="stat-value">{{ travelItems.length }}</span>
        <span class="stat-label">{{ 'insights.travelItems' | translate }}</span>
      </div>
    </div>
  </div>
</div>
