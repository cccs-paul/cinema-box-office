<!--
  myRC - Login Component Template
  Copyright (c) 2026 myRC Team
  Licensed under MIT License
-->
<div class="login-container">
  <!-- Header Section -->
  <header class="login-header">
    <div class="login-brand">
      <img src="assets/logo.svg" alt="myRC Logo" class="login-logo" width="48" height="48">
      <h1>{{ title }}</h1>
    </div>
    <p>Responsibility Centre Management System</p>
  </header>

  <!-- Main Login Section -->
  <main class="login-main">
    <div class="login-card">
      <!-- Tab Navigation -->
      <nav class="auth-tabs">
        <button
          [class.active]="activeTab === 'local'"
          (click)="switchTab('local')"
          class="tab-button"
        >
          <span class="tab-icon">üë§</span>
          <span class="tab-text">App Account</span>
        </button>
        <button
          [class.active]="activeTab === 'ldap'"
          (click)="switchTab('ldap')"
          class="tab-button"
        >
          <span class="tab-icon">üîê</span>
          <span class="tab-text">LDAP</span>
        </button>
        <button
          [class.active]="activeTab === 'oauth2'"
          (click)="switchTab('oauth2')"
          class="tab-button"
        >
          <span class="tab-icon">üåê</span>
          <span class="tab-text">OAuth2</span>
        </button>
      </nav>

      <!-- Messages -->
      <div *ngIf="errorMessage" class="alert alert-error">
        <span class="alert-icon">‚ùå</span>
        <span class="alert-text">{{ errorMessage }}</span>
      </div>
      <div *ngIf="successMessage" class="alert alert-success">
        <span class="alert-icon">‚úÖ</span>
        <span class="alert-text">{{ successMessage }}</span>
      </div>

      <!-- LOCAL Authentication Tab -->
      <div *ngIf="activeTab === 'local'" class="tab-content active">
        <form [formGroup]="localForm" (ngSubmit)="loginLocal()" class="login-form">
          <div class="form-group">
            <label for="username" class="form-label">Username</label>
            <input
              id="username"
              type="text"
              formControlName="username"
              class="form-input"
              placeholder="Enter your username"
            />
            <small class="form-hint">Demo: admin</small>
          </div>

          <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <input
              id="password"
              type="password"
              formControlName="password"
              class="form-input"
              placeholder="Enter your password"
            />
            <small class="form-hint">Demo: Admin&#64;123</small>
          </div>

          <div class="form-group checkbox">
            <input
              id="rememberMe"
              type="checkbox"
              formControlName="rememberMe"
              class="form-checkbox"
            />
            <label for="rememberMe" class="form-label checkbox-label">Remember me</label>
          </div>

          <button
            type="submit"
            [disabled]="isLoading || localForm.invalid"
            class="btn btn-primary btn-block"
          >
            <span *ngIf="!isLoading">Sign In</span>
            <span *ngIf="isLoading">Signing In...</span>
          </button>
        </form>
      </div>

      <!-- LDAP Authentication Tab -->
      <div *ngIf="activeTab === 'ldap'" class="tab-content active">
        <form [formGroup]="ldapForm" (ngSubmit)="loginLdap()" class="login-form">
          <div class="form-group">
            <label for="ldapUsername" class="form-label">LDAP Username</label>
            <input
              id="ldapUsername"
              type="text"
              formControlName="ldapUsername"
              class="form-input"
              placeholder="Enter your LDAP username"
              [disabled]="isLoading"
            />
          </div>

          <div class="form-group">
            <label for="ldapPassword" class="form-label">LDAP Password</label>
            <input
              id="ldapPassword"
              type="password"
              formControlName="ldapPassword"
              class="form-input"
              placeholder="Enter your LDAP password"
              [disabled]="isLoading"
            />
          </div>

          <button
            type="submit"
            [disabled]="isLoading || ldapForm.invalid"
            class="btn btn-primary btn-block"
          >
            <span *ngIf="!isLoading">Sign In with LDAP</span>
            <span *ngIf="isLoading">Authenticating...</span>
          </button>
        </form>
      </div>

      <!-- OAuth2 Authentication Tab -->
      <div *ngIf="activeTab === 'oauth2'" class="tab-content active">
        <div class="oauth-buttons">
          <button
            type="button"
            (click)="loginOAuth2('google')"
            [disabled]="isLoading"
            class="btn btn-oauth btn-google"
          >
            <span class="oauth-icon">üîµ</span>
            <span *ngIf="!isLoading">Sign in with Google</span>
            <span *ngIf="isLoading">Redirecting...</span>
          </button>

          <button
            type="button"
            (click)="loginOAuth2('github')"
            [disabled]="isLoading"
            class="btn btn-oauth btn-github"
          >
            <span class="oauth-icon">‚ö´</span>
            <span *ngIf="!isLoading">Sign in with GitHub</span>
            <span *ngIf="isLoading">Redirecting...</span>
          </button>

          <button
            type="button"
            (click)="loginOAuth2('microsoft')"
            [disabled]="isLoading"
            class="btn btn-oauth btn-microsoft"
          >
            <span class="oauth-icon">‚óºÔ∏è</span>
            <span *ngIf="!isLoading">Sign in with Microsoft</span>
            <span *ngIf="isLoading">Redirecting...</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Footer Info -->
    <footer class="login-footer">
      <div class="footer-content">
        <div class="footer-section">
          <p>&copy; 2026 myRC. All rights reserved.</p>
          <p class="demo-hint">
            <strong>Demo Credentials:</strong> Username: <code>admin</code> | Password: <code>Admin&#64;123</code>
          </p>
        </div>
        
        <div class="footer-divider"></div>
        
        <div class="footer-status">
          <div class="status-compact">
            <div class="status-item-compact">
              <span class="status-label">API:</span>
              <div [class.healthy]="isApiHealthy" [class.unhealthy]="!isApiHealthy" class="status-indicator-compact">
                <span class="status-dot"></span>
                <span class="status-text">{{ apiStatus }}</span>
              </div>
            </div>
            <div class="status-item-compact">
              <span class="status-label">Database:</span>
              <div [class.healthy]="isDatabaseHealthy" [class.unhealthy]="!isDatabaseHealthy" class="status-indicator-compact">
                <span class="status-dot"></span>
                <span class="status-text">{{ databaseStatus }}</span>
              </div>
            </div>
          </div>
          
          <div class="tools-links">
            <a href="http://localhost:8080/api/swagger-ui.html" target="_blank" class="tool-link" title="API Documentation">
              <span>üìö</span>
            </a>
            <a href="http://localhost:5050" target="_blank" class="tool-link" title="Database Console">
              <span>üóÑÔ∏è</span>
            </a>
          </div>
        </div>
      </div>
    </footer>
  </main>
</div>
