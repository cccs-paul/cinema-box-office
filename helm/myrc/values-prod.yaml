# =============================================================================
# myRC Helm Values - Production Environment
# =============================================================================
# Usage:
#   helm install myrc ./helm/myrc -f helm/myrc/values-prod.yaml \
#     --set postgresql.auth.password=<STRONG_PASSWORD>
#
# Characteristics:
#   - Multiple replicas with autoscaling
#   - PodDisruptionBudgets for zero-downtime upgrades
#   - Strict TLS, forced SSL redirect
#   - Minimal logging
#   - Pod anti-affinity to spread across nodes
#   - Production-grade resource limits
# =============================================================================

backend:
  replicaCount: 3
  springProfiles: "prod"
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: "2"
      memory: 2Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  podDisruptionBudget:
    enabled: true
    minAvailable: 2
  podAntiAffinity: true

frontend:
  replicaCount: 2
  resources:
    requests:
      cpu: 200m
      memory: 128Mi
    limits:
      cpu: "1"
      memory: 512Mi
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 80
  podDisruptionBudget:
    enabled: true
    minAvailable: 1
  podAntiAffinity: true

postgresql:
  enabled: true
  storage:
    size: 50Gi
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: "2"
      memory: 4Gi

logging:
  rootLevel: WARN
  appLevel: INFO

cors:
  allowedOrigins: "https://myrc.example.com"

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "120"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "120"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/rate-limit-window: "1m"
  host: myrc.example.com
  tls:
    enabled: true
    secretName: myrc-tls

auth:
  appAccount:
    enabled: true
    allowRegistration: false
  ldap:
    enabled: false
  oauth2:
    enabled: false
